{% extends "layout.html" %}

{% block title %}Käyttäjä {{ user.username }}{% endblock %}

{% block content %}
<h2>Käyttäjä: {{ user.username }}</h2>

{% if has_image %}
  <p>Profiilikuva:</p>
  <img src="{{ url_for('show_image', user_id=user.id) }}?v={{ session.csrf_token }}"
       alt="Profiilikuva" style="max-width:200px;max-height:200px;">
{% else %}
  <p>Käyttäjällä ei ole profiilikuvaa.</p>
{% endif %}

<p>Ikä: {{ user.age or 'Ei asetettu' }}</p>
<p>Bio: {{ user.bio or 'Ei asetettu' }}</p>

{% if session.user_id == user.id %}
    <p><a href="/edit_profile">Muokkaa profiilia</a></p>
{% endif %}

<hr>

<h3>Tilastot</h3>
<p>Yhteensä viestejä: {{ total_messages }}</p>
{% if latest_message %}
<p>Uusin viesti: <a href="/message/{{ latest_message.id }}">{{ latest_message.title }}</a></p>
{% endif %}

<h3>Viestit</h3>
{% if messages %}
<ul>
  {% for message in messages %}
    <li><a href="/message/{{ message.id }}">{{ message.title }}</a></li>
  {% endfor %}
</ul>
{% else %}
<p>Käyttäjällä ei ole viestejä.</p>
{% endif %}

<hr>

<p><a href="{{ previous_page }}">Takaisin</a></p>

{% endblock %}

